<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="report_journal_entries">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <t t-foreach="docs" t-as="o">
                    <div class="page">
                        <br/>
                        <div class="oe_structure"/>
                        <div>
                            <h2 class="text-center mb32">
                                <strong>Journal Entry</strong>
                            </h2>
                        </div>
                        <br/>
                        <table style="width:100%;margin:0px auto;background:white;border:1px solid #e1e1e1;"
                               class="table table-condensed">
                            <tbody>
                                <tr>
                                    <td>
                                        <strong>Journal Entry :</strong>
                                    </td>
                                    <td>
                                        <p t-field="o.name"/>
                                    </td>
                                    <td>
                                        <strong>Journal :</strong>
                                    </td>
                                    <td>
                                        <p t-field="o.journal_id"/>
                                    </td>
                                    <td>
                                        <strong>Company:</strong>
                                    </td>
                                    <td>
                                        <p t-field="o.company_id"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Date :</strong>
                                    </td>
                                    <td>
                                        <p t-field="o.date"/>
                                    </td>
                                    <td>
                                        <strong>Reference :</strong>
                                    </td>
                                    <td>
                                        <p t-field="o.ref"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br/>

                        <t t-set="display_tax" t-value="any(l.tax_ids for l in o.line_ids)"/>
                        <t t-set="display_partner" t-value="any(l.partner_id for l in o.line_ids)"/>
                        <t t-set="display_analytic" t-value="any(l.analytic_distribution for l in o.line_ids)"/>
                        <t t-set="display_date_maturity" t-value="any(l.date_maturity for l in o.line_ids)"/>
                        <t t-set="display_discount" t-value="any(l.discount_amount_currency for l in o.line_ids)"/>
                        <t t-set="display_amount_currency"
                           t-value="any(l.amount_currency and l.currency_id != l.company_id.currency_id for l in o.line_ids)"/>
                        <div class="oe_structure"/>

                        <table class="table table-sm o_main_table table-borderless" name="invoice_line_table">
                            <thead>
                                <tr>
                                    <th name="th_account" class="text-start">
                                        <span>Account</span>
                                    </th>
                                    <th name="th_partner" t-if="display_partner" class="text-start">
                                        <span>Partner</span>
                                    </th>
                                    <th name="th_label" class="text-start">
                                        <span>Label</span>
                                    </th>
                                    <th name="th_due_date" t-if="display_date_maturity" class="text-start">
                                        <span>Due Date</span>
                                    </th>
                                    <!--                                    <th name="th_analytic" t-if="display_analytic" class="text-start"><span>Analytic</span></th>-->
                                    <th name="th_amount_currency" t-if="display_amount_currency"
                                        t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                        <span>Amount Currency</span>
                                    </th>
                                    <th name="th_discount" t-if="display_discount"
                                        t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                        <span>Disc Amount</span>
                                    </th>
                                    <th name="th_analytic" t-if="display_analytic" class="text-end">
                                        <span>Analytic Account</span>
                                    </th>
                                    <th name="th_taxes" t-if="display_tax"
                                        t-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                        <span>Taxes</span>
                                    </th>
                                    <th name="th_debit"
                                        t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                        <span>Debit</span>
                                    </th>
                                    <th name="th_credit"
                                        t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                        <span>Credit</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="invoice_tbody">
                                <t t-set="current_debit" t-value="0"/>
                                <t t-set="current_credit" t-value="0"/>
                                <t t-set="lines"
                                   t-value="o.line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>

                                <t t-foreach="lines" t-as="line">
                                    <t t-set="current_debit" t-value="current_debit + line.debit"/>
                                    <t t-set="current_credit" t-value="current_credit + line.credit"/>

                                    <tr class="'bg-200 fw-bold">
                                        <t name="account_invoice_line_accountable">
                                            <td name="account_invoice_line_name">
                                                <span t-field="line.account_id"/>
                                            </td>
                                            <td t-if="display_partner" name="td_partner" class="text-start">
                                                <span t-field="line.partner_id"/>
                                            </td>
                                            <td name="td_label" class="text-start">
                                                <span t-field="line.name"/>
                                            </td>
                                            <td t-if="display_date_maturity" name="td_date_maturity" class="text-start">
                                                <span t-field="line.date_maturity"
                                                      t-options="{&quot;widget&quot;: &quot;date&quot;}"/>
                                            </td>

                                            <td name="td_amount_currency" t-if="display_amount_currency"
                                                t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                <span class="text-nowrap" t-field="line.amount_currency"/>
                                            </td>
                                            <td name="td_discount" t-if="display_discount"
                                                t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                <span class="text-nowrap" t-field="line.discount_amount_currency">
                                                </span>
                                            </td>
                                            <td name="td_analytic" t-if="display_analytic" class="text-start">
                                                <span>
                                                    <div t-foreach="line.analytic_distribution" t-as="distribution">
                                                        <div t-foreach="distribution.split(',')" t-as="d">
                                                            <t t-esc="line.env['account.analytic.account'].browse(int(d))[0].name"/>
                                                            :
                                                            <t t-esc="line.analytic_distribution.get(distribution)"/>
                                                        </div>
                                                    </div>
                                                </span>
                                            </td>
                                            <td name="td_taxes" t-if="display_tax"
                                                t-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                <span t-out="', '.join(map(lambda x: (x.name), line.tax_ids))"
                                                      id="line_tax_ids">Tax 15%
                                                </span>
                                            </td>
                                            <td name="td_debit" class="text-end">
                                                <span class="text-nowrap" t-field="line.debit">0.00</span>
                                            </td>
                                            <td name="td_credit" class="text-end">
                                                <span class="text-nowrap" t-field="line.credit">0.00</span>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                                <tr>
                                    <t t-set="colspan_no" t-value="2"/>
                                    <t t-if="display_tax" t-set="colspan_no" t-value="colspan_no+1"/>
                                    <t t-if="display_date_maturity" t-set="colspan_no" t-value="colspan_no+1"/>
                                    <t t-if="display_partner" t-set="colspan_no" t-value="colspan_no+1"/>
                                    <t t-if="display_discount" t-set="colspan_no" t-value="colspan_no+1"/>
                                    <t t-if="display_analytic" t-set="colspan_no" t-value="colspan_no+1"/>
                                    <t t-if="display_amount_currency" t-set="colspan_no" t-value="colspan_no+1"/>
                                    <td t-att-colspan="colspan_no" style="border-top: 1px solid black;"
                                        class="fw-bold text-end">Total
                                    </td>
                                    <td name="td_total_debit" style="border-top: 1px solid black;" class="text-end">
                                        <strong>
                                            <span class="text-nowrap" t-out="current_debit"
                                                  t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}">
                                                0.00
                                            </span>
                                        </strong>
                                    </td>
                                    <td name="td_total_credit" style="border-top: 1px solid black;" class="text-end">
                                        <strong>
                                            <span class="text-nowrap" t-out="current_credit"
                                                  t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}">
                                                0.00
                                            </span>
                                        </strong>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!--				<table style="width:100%;margin:0px auto;background:white;border:1px solid #e1e1e1;" class="table table-condensed">-->
                        <!--					<thead>-->
                        <!--						<tr>-->

                        <!--							<th>Account</th>-->
                        <!--							<th>Partner</th>-->
                        <!--							<th>Label</th>-->
                        <!--							<th>Due Date</th>-->
                        <!--							<th>Analytic Account</th>-->
                        <!--							<th>Taxes(%)</th>-->
                        <!--							<th>Debit</th>-->
                        <!--							<th>Credit</th>-->
                        <!--						</tr>-->
                        <!--					</thead>  -->
                        <!--					<tbody class="consumed_tbody">-->
                        <!--						<t t-set="total" t-value="0.0"/>-->
                        <!--						<t t-set="total1" t-value="0.0"/>-->
                        <!--						<t t-foreach="o.line_ids" t-as="line">    -->
                        <!--						<tr>-->

                        <!--							<td>-->
                        <!--								<span t-field="line.account_id" />-->
                        <!--							</td>-->
                        <!--							<td>-->
                        <!--								<span t-field="line.partner_id" />-->
                        <!--							</td>-->
                        <!--							<td>-->
                        <!--								<span t-field="line.name" />-->
                        <!--							</td>-->
                        <!--							<td>-->
                        <!--								<span t-field="line.date_maturity" />-->
                        <!--							</td>-->
                        <!--							<td>-->
                        <!--								<span>-->
                        <!--									<div t-foreach="line.analytic_distribution" t-as="distribution">-->
                        <!--										<t t-set="distributions" t-value="distribution.split(',')"/>-->
                        <!--										<t t-foreach="distributions" t-as="dist">-->
                        <!--											<t t-if="line.env['account.analytic.account'].browse(int(dist))[0].partner_id">-->
                        <!--												<t t-esc="line.env['account.analytic.account'].browse(int(dist))[0].name"/>- -->
                        <!--												<t t-esc="line.env['account.analytic.account'].browse(int(dist))[0].partner_id.name"/>, -->
                        <!--												<t t-esc="line.analytic_distribution.get(dist)"/>-->
                        <!--											</t>-->
                        <!--											<t t-else="">-->
                        <!--												<t t-esc="line.env['account.analytic.account'].browse(int(dist))[0].name"/>,-->
                        <!--												<t t-esc="line.analytic_distribution.get(dist)"/>-->
                        <!--											</t>-->
                        <!--											<br/>-->
                        <!--										</t>-->
                        <!--									</div>-->
                        <!--								</span>-->
                        <!--							</td>-->
                        <!--							<td>-->
                        <!--								<span t-field="line.tax_ids" />-->
                        <!--							</td>-->
                        <!--							<td>-->
                        <!--								<span t-field="line.debit" />-->
                        <!--							</td>-->
                        <!--							<td>-->
                        <!--								<span t-field="line.credit" />-->
                        <!--							</td>-->
                        <!--						</tr>-->
                        <!--						<t t-set="total" t-value="total + line.debit"/>-->
                        <!--						<t t-set="total1" t-value="total1 + line.credit"/>-->
                        <!--						</t>-->
                        <!--						<tr>-->
                        <!--							<td></td>-->
                        <!--							<td></td>-->
                        <!--							<td></td>-->
                        <!--							<td></td>-->
                        <!--							<td></td>-->
                        <!--							<td><strong>Total:</strong></td>-->
                        <!--							<td width="10%"><strong>-->
                        <!--								<span><t t-esc="total"/></span>-->
                        <!--							</strong></td>-->
                        <!--							 <td width="10%"><strong>-->
                        <!--								<span><t t-esc="total1"/></span>-->
                        <!--							</strong></td>-->
                        <!--					  	</tr>-->
                        <!--					</tbody>-->
                        <!--				</table>-->
                    </div>
                    <!--                    <div class="page" style="font-size:15px;">-->
                    <!--                        <div>-->
                    <!--                            <h3>-->
                    <!--                                <span t-field="o.name"/>-->
                    <!--                            </h3>-->
                    <!--                        </div>-->
                    <!--                        <br></br>-->
                    <!--                        <div class="row">-->
                    <!--                            <table width="100%" class="table-bordered">-->

                    <!--                                <tr>-->
                    <!--                                    <td>Journal:-->
                    <!--                                        <span t-field="o.journal_id.name"/>-->
                    <!--                                    </td>-->
                    <!--                                    <td>-->
                    <!--                                        Date:-->
                    <!--                                        <span t-field="o.date" t-options="{'widget': 'date'}"/>-->
                    <!--                                    </td>-->
                    <!--                                </tr>-->
                    <!--                                <tr>-->
                    <!--                                    <td>-->
                    <!--                                        Partner:-->
                    <!--                                        <span t-field="o.partner_id.display_name"/>-->
                    <!--                                    </td>-->
                    <!--                                    <td>-->
                    <!--                                        Reference:-->
                    <!--                                        <span t-field="o.ref"/>-->
                    <!--                                    </td>-->
                    <!--                                </tr>-->
                    <!--                            </table>-->
                    <!--                        </div>-->
                    <!--                        <div class="row">-->
                    <!--                            <br></br>-->
                    <!--                            <table width="100%" class="table-bordered">-->
                    <!--                                <thead>-->
                    <!--                                    <tr>-->
                    <!--                                        <th>Account</th>-->
                    <!--                                        <th>Date</th>-->
                    <!--                                        <th>Partner</th>-->
                    <!--                                        <th>Label</th>-->
                    <!--&lt;!&ndash;                                        <th>Analytic Account</th>&ndash;&gt;-->
                    <!--                                        <th>Debit</th>-->
                    <!--                                        <th>Credit</th>-->
                    <!--                                    </tr>-->
                    <!--                                </thead>-->
                    <!--                                <tbody>-->
                    <!--                                    <t t-set="total_credit" t-value="0"/>-->
                    <!--                                    <t t-set="total_debit" t-value="0"/>-->
                    <!--                                    <t t-foreach="o.line_ids" t-as="line">-->
                    <!--                                        <tr>-->
                    <!--                                            <td>-->
                    <!--                                                <span t-field="line.account_id.name"/>-->
                    <!--                                            </td>-->
                    <!--                                            <td>-->
                    <!--                                                <span t-field="line.date" t-options="{'widget': 'date'}"/>-->
                    <!--                                            </td>-->
                    <!--                                            <td>-->
                    <!--                                                <span t-field="line.partner_id.display_name"/>-->
                    <!--                                            </td>-->
                    <!--                                            <td>-->
                    <!--                                                <span t-field="line.name"/>-->
                    <!--                                            </td>-->
                    <!--&lt;!&ndash;                                            <td>&ndash;&gt;-->
                    <!--&lt;!&ndash;                                                <span t-if="line.analytic_account_id" t-field="line.analytic_account_id.display_name"/>&ndash;&gt;-->
                    <!--&lt;!&ndash;                                            </td>&ndash;&gt;-->
                    <!--                                            <td class="text-end">-->
                    <!--                                                <span t-field="line.debit"-->
                    <!--                                                      t-options="{'widget': 'monetary', 'display_currency': line.currency_id}"/>-->

                    <!--                                            </td>-->
                    <!--                                            <td class="text-end">-->
                    <!--                                                <span t-field="line.credit"-->
                    <!--                                                      t-options="{'widget': 'monetary', 'display_currency': line.currency_id}"/>-->
                    <!--                                            </td>-->
                    <!--                                            <t t-set="total_credit" t-value="total_credit + line.credit"/>-->
                    <!--                                            <t t-set="total_debit" t-value="total_debit + line.debit"/>-->
                    <!--                                        </tr>-->
                    <!--                                    </t>-->
                    <!--                                </tbody>-->
                    <!--                                <tfooter>-->
                    <!--                                    <tr>-->
                    <!--                                        <td colspan="5"></td>-->
                    <!--                                        <td class="text-end">-->
                    <!--                                            <span t-esc="total_debit"-->
                    <!--                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>-->
                    <!--                                        </td>-->
                    <!--                                        <td class="text-end">-->
                    <!--                                            <span t-esc="total_credit"-->
                    <!--                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>-->
                    <!--                                        </td>-->
                    <!--                                    </tr>-->
                    <!--                                </tfooter>-->
                    <!--                            </table>-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                </t>
            </t>
        </t>
    </template>

</odoo>
